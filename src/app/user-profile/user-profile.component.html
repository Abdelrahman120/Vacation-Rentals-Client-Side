<div class="container w-50 border bg-white mx-auto p-5 w-75" style="margin-top: 100px;">
  <div class="row">
    <div class="col-xl-12">
      <div class="card">
        <div class="card-body pb-0">
          <div class="row align-items-center">
            <div class="col-md-3">
              <div class="text-center border-end">
                @if(isUser()){
                <img [src]="'http://localhost:8000/images/posts/' + user.image" alt="Profile Image"
                  class="img-fluid avatar-xxl rounded-circle" *ngIf="user.image; else defaultImage" />
                }@else {
                <img src="{{user.image}}" alt="Profile Image" class="img-fluid avatar-xxl rounded-circle"
                  *ngIf="user.image; else defaultImage" />
                }
                <ng-template #defaultImage>
                  <img src="assets/default-avatar.png" alt="Default Image" class="profile-image" />
                </ng-template>
                <h4 class="text-primary font-size-20 mt-3 mb-2">{{ user.name }}</h4>
              </div>
            </div>
            <div class="col-md-9">
              <div class="ms-3">
                <div>
                  <div class="d-flex">
                    <h4 class="card-title mb-2">Biography</h4>
                    <div class="d-flex  ms-auto">
                      <a [routerLink]="['/favorite']"
                        class="btn btn-light d-flex roboto-regular align-items-center me-3 ">
                        <fa-icon [icon]="faHeart" class="fs-4"></fa-icon>
                        <span class="ms-1 fs-5">Favorite</span>
                      </a>
                      @if(isUser()){
                      <a [routerLink]="['/edit-user-profile', id]"
                        class="btn btn-secondary d-flex roboto-regular align-items-center me-3">
                        <span class="ms-1 fs-5">Edit Profile</span>
                      </a>
                      }
                    </div>
                  </div>
                </div>
                <p class="profile-email text-dark"><strong>Email:</strong> {{ user.email }}</p>
                @if(user.phone){
                <p class="profile-phone text-dark"> <strong>Phone:</strong> {{ user.phone }}</p>
                }
                @if(user.address){
                <p class="profile-address text-dark"><strong>Address:</strong> {{ user.address }}</p>
                }
                <p class="profile-gender text-dark"><strong>Gender:</strong> {{ user.gender }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- <div class="card bg-light">
        <div class="tab-content p-4">
          <div class="tab-pane active show" id="projects-tab" role="tabpanel">
            <div class="d-flex align-items-center">
              <div class="flex-1">
                <h4 class="card-title mb-4">Payments</h4>
              </div>
            </div>

            <div *ngIf="payments.length > 0; else noPayments" class="row g-5 " id="all-projects">

              <div *ngFor="let payment of payments" class="col-md-6 shadow-sm" id="project-items-1">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex mb-3">
                      <div class="flex-grow-1 align-items-start">
                        <div>
                          <h6 class="mb-0 text-muted">
                            <i class="mdi mdi-circle-medium text-danger fs-3 align-middle"></i>
                            <span class="team-date">Date: {{ payment.start_date }}</span>
                          </h6>
                        </div>
                      </div>
                    </div>
                    <div class="mb-4">
                      <h5 class="mb-1 font-size-17 team-title">Payment Name: {{ payment.product_name }}</h5>
                      <p class="text-muted mb-0 team-description">Amount: {{ payment.amount }} {{ payment.currency }}
                      </p>
                      <p class="text-muted mb-0 team-description">Status: {{ payment.payment_status }}
                      </p>
                    </div>

                  </div>
                </div>
              </div>
            </div>
            <ng-template #noPayments>
              <p class="text-dark">No payments found.</p>
            </ng-template>
          </div>
        </div>
      </div>
      <div class="card bg-light">
        <div class="tab-content p-4">
          <div class="tab-pane active show" id="projects-tab" role="tabpanel">
            <div class="d-flex align-items-center">
              <div class="flex-1">
                <h4 class="card-title mb-4">Reviews</h4>
              </div>
            </div>
            <div *ngIf="reviews.length > 0; else noReviews" class="row g-5 " id="all-projects">
              <div *ngFor="let review of reviews" class="col-md-6 shadow-sm" id="project-items-1">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex mb-3">
                      <div class="flex-grow-1 align-items-start">
                        <div>
                          <h6 class="mb-0 text-muted">
                            <i class="mdi mdi-circle-medium text-danger fs-3 align-middle"></i>
                            <span class="team-date">Property Name: {{ review.property_name }}</span>
                          </h6>
                        </div>
                      </div>
                    </div>
                    <div class="mb-4">
                      <h5 class="mb-1 font-size-17 team-title">Review: {{ review.review }}</h5>
                      <p class="text-muted mb-0 team-description">Rating: {{ review.rating }}/5
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <ng-template #noReviews>
              <p class="text-dark">No reviews found.</p>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div> -->
    <div>
      <div *ngIf="user.payments.length > 0; else noPayments" class="row g-5 " id="all-projects">
        <ng-container *ngFor="let payment of user.payments" class="col-md-6 shadow-sm" id="project-items-1">
          <div class="mt-5">
            <h5 class="text-center fw-bold fs-3 text-dark-emphasis">
              <br>
              Payments
            </h5>
            <table class="table table-hover">
              <thead class="table-dark">
                <tr>
                  <th>Date</th>
                  <th>Payment Name</th>
                  <th>Amount</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let payment of user.payments">
                  <td>{{ payment.start_date }}</td>
                  <td>{{ payment.product_name }}</td>
                  <td>{{ payment.amount }} {{ payment.currency }}</td>
                  <td>{{ payment.payment_status }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </ng-container>
      </div>
      <ng-template #noPayments>
        <h4>Payments</h4>
        <p class="text-dark">No payments found.</p>
      </ng-template>
    </div>

    <div>
      <div *ngIf="user.reviews.length > 0; else noReviews" class="row g-5 " id="all-projects">
        <ng-container *ngFor="let review of user.reviews" class="col-md-6 shadow-sm" id="project-items-1">
          <div class="mt-5">
            <h5 class="text-center fw-bold fs-3 text-dark-emphasis">
              <br>
              Reviews
            </h5>
            <table class="table table-hover">
              <thead class="table-dark">
                <tr>
                  <th>Property Name</th>
                  <th>Review</th>
                  <th>Rating</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let review of user.reviews">
                  <td>{{ review.property_name }}</td>
                  <td>{{ review.review }}</td>
                  <td>{{ review.rating}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </ng-container>
      </div>
      <ng-template #noReviews>
        <h4>Reviews</h4>
        <p class="text-dark">No reviews found.</p>
      </ng-template>
    </div>
  </div>
